# –û—Ç—á—ë—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–∏—è: Advanced Hybrid RAG

## üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ

**–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:** Advanced Hybrid RAG Assistant

**–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:** Telegram-–±–æ—Ç —Å RAG (Retrieval-Augmented Generation) —Å–∏—Å—Ç–µ–º–æ–π –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –°–±–µ—Ä–±–∞–Ω–∫–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞ –ø–æ–∏—Å–∫–∞: semantic, hybrid –∏ hybrid+reranker. –í–∫–ª—é—á–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ RAGAS –º–µ—Ç—Ä–∏–∫–∏.

**–í–∞—Ä–∏–∞–Ω—Ç –∑–∞–¥–∞–Ω–∏—è:** –ë–∞–∑–æ–≤—ã–π

---

## üîß –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### RAG Pipeline (–æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ú–æ–¥–µ–ª—å | –ü—Ä–æ–≤–∞–π–¥–µ—Ä |
|-----------|--------|-----------|
| **LLM** | `qwen2.5:7b` | Ollama (–ª–æ–∫–∞–ª—å–Ω–æ) |
| **Embeddings** | `aroxima/multilingual-e5-large-instruct` | Ollama (–ª–æ–∫–∞–ª—å–Ω–æ) |
| **Cross-Encoder (Reranker)** | `cross-encoder/mmarco-mMiniLMv2-L12-H384-v1` | HuggingFace (–ª–æ–∫–∞–ª—å–Ω–æ) |
| **BM25** | `rank-bm25` | –õ–æ–∫–∞–ª—å–Ω–æ |

### RAGAS Evaluation

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ú–æ–¥–µ–ª—å | –ü—Ä–æ–≤–∞–π–¥–µ—Ä |
|-----------|--------|-----------|
| **LLM –¥–ª—è –æ—Ü–µ–Ω–∫–∏** | `qwen2.5:7b` | Ollama (–ª–æ–∫–∞–ª—å–Ω–æ) |
| **Embeddings –¥–ª—è –æ—Ü–µ–Ω–∫–∏** | `aroxima/multilingual-e5-large-instruct` | Ollama (–ª–æ–∫–∞–ª—å–Ω–æ) |

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 1: Semantic Retrieval

```env
RETRIEVAL_MODE=semantic
EMBEDDING_PROVIDER=ollama
OLLAMA_EMBEDDING_MODEL=aroxima/multilingual-e5-large-instruct
MODEL=qwen2.5:7b
SEMANTIC_RETRIEVER_K=10
```

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –±–ª–∏–∑–æ—Å—Ç–∏. –î–æ–∫—É–º–µ–Ω—Ç—ã –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏, –ø–æ–∏—Å–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É.

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 2: Hybrid Retrieval (Semantic + BM25)

```env
RETRIEVAL_MODE=hybrid
EMBEDDING_PROVIDER=ollama
OLLAMA_EMBEDDING_MODEL=aroxima/multilingual-e5-large-instruct
MODEL=qwen2.5:7b
SEMANTIC_RETRIEVER_K=10
BM25_RETRIEVER_K=10
ENSEMBLE_SEMANTIC_WEIGHT=0.5
ENSEMBLE_BM25_WEIGHT=0.5
```

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (semantic) –∏ –ª–µ–∫—Å–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ (BM25). –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é Reciprocal Rank Fusion —Å —Ä–∞–≤–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏.

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 3: Hybrid + Reranker

```env
RETRIEVAL_MODE=hybrid_reranker
EMBEDDING_PROVIDER=ollama
OLLAMA_EMBEDDING_MODEL=aroxima/multilingual-e5-large-instruct
MODEL=qwen2.5:7b
SEMANTIC_RETRIEVER_K=10
BM25_RETRIEVER_K=10
ENSEMBLE_SEMANTIC_WEIGHT=0.5
ENSEMBLE_BM25_WEIGHT=0.5
CROSS_ENCODER_MODEL=cross-encoder/mmarco-mMiniLMv2-L12-H384-v1
RERANKER_TOP_K=3
```

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º —ç—Ç–∞–ø–æ–º –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ cross-encoder. Cross-encoder –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã (–≤–æ–ø—Ä–æ—Å, –¥–æ–∫—É–º–µ–Ω—Ç) –∏ –æ—Ç–±–∏—Ä–∞–µ—Ç —Ç–æ–ø-3 –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö.

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã RAGAS –º–µ—Ç—Ä–∏–∫

### –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

| –ú–µ—Ç—Ä–∏–∫–∞ | Semantic | Hybrid | Hybrid + Reranker |
|---------|----------|--------|-------------------|
| **Faithfulness** (–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å) | üü¢ 1.000 | üü¢ 0.917 | üü¢ 1.000 |
| **Answer Relevancy** (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞) | üü° 0.785 | üü° 0.784 | üü° 0.786 |
| **Answer Correctness** (–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å) | üü° 0.734 | üü° 0.668 | üü° 0.650 |
| **Answer Similarity** (–ø–æ—Ö–æ–∂–µ—Å—Ç—å –Ω–∞ —ç—Ç–∞–ª–æ–Ω) | üü¢ 0.956 | üü¢ 0.948 | üü¢ 0.954 |
| **Context Recall** (–ø–æ–ª–Ω–æ—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞) | üü¢ 1.000 | üü¢ 1.000 | üü¢ 1.000 |
| **Context Precision** (—Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞) | üî¥ 0.000 | üî¥ nan | üî¥ 0.000 |

### –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –º–µ—Ç—Ä–∏–∫

- üü¢ **–ó–µ–ª—ë–Ω—ã–π** (‚â•0.9): –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- üü° **–ñ—ë–ª—Ç—ã–π** (0.6-0.9): –•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- üî¥ **–ö—Ä–∞—Å–Ω—ã–π** (<0.6 –∏–ª–∏ nan): –¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è

---

## üìà –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### Faithfulness (–û–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)

–ú–µ—Ç—Ä–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç—ã –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π).

- **Semantic**: 1.000 ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **Hybrid**: 0.917 ‚Äî –Ω–µ–±–æ–ª—å—à–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ
- **Hybrid + Reranker**: 1.000 ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–í—ã–≤–æ–¥:** Semantic –∏ Hybrid+Reranker –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏–¥–µ–∞–ª—å–Ω—É—é –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤. Hybrid —Ä–µ–∂–∏–º –¥–æ–ø—É—Å–∫–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è.

### Answer Relevancy (–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞)

–ú–µ—Ç—Ä–∏–∫–∞ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–¥–∞–Ω–Ω–æ–º—É –≤–æ–ø—Ä–æ—Å—É.

- **Semantic**: 0.785
- **Hybrid**: 0.784
- **Hybrid + Reranker**: 0.786

**–í—ã–≤–æ–¥:** –í—Å–µ —Ç—Ä–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—É—é —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (~0.785). –†–µ–∂–∏–º retrieval –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —ç—Ç—É –º–µ—Ç—Ä–∏–∫—É.

### Answer Correctness (–ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞)

–ú–µ—Ç—Ä–∏–∫–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º (ground truth).

- **Semantic**: 0.734 ‚Äî –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **Hybrid**: 0.668
- **Hybrid + Reranker**: 0.650 ‚Äî —Ö—É–¥—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–í—ã–≤–æ–¥:** –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ BM25 –∏ reranker —Å–Ω–∏–∂–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤. –í–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ ‚Äî –±–æ–ª–µ–µ —É–∑–∫–∞—è –≤—ã–±–æ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ reranking (top_k=3) –º–æ–∂–µ—Ç –∏—Å–∫–ª—é—á–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

### Answer Similarity (–ü–æ—Ö–æ–∂–µ—Å—Ç—å –Ω–∞ —ç—Ç–∞–ª–æ–Ω)

–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –±–ª–∏–∑–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ –∫ —ç—Ç–∞–ª–æ–Ω—É.

- **Semantic**: 0.956 ‚Äî –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **Hybrid**: 0.948
- **Hybrid + Reranker**: 0.954

**–í—ã–≤–æ–¥:** –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤—ã—Å–æ–∫—É—é —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é –ø–æ—Ö–æ–∂–µ—Å—Ç—å (>0.94).

### Context Recall (–ü–æ–ª–Ω–æ—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)

–ú–µ—Ç—Ä–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∞—è –¥–æ–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞.

- –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: **1.000**

**–í—ã–≤–æ–¥:** –í—Å–µ —Ä–µ–∂–∏–º—ã –Ω–∞—Ö–æ–¥—è—Ç –ø–æ–ª–Ω—ã–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.

### Context Precision (–¢–æ—á–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞)

–ú–µ—Ç—Ä–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ–ª—é —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å—Ä–µ–¥–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö.

- –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: **0.000 –∏–ª–∏ nan**

**–í—ã–≤–æ–¥:** –ù–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã —Å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∏ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–æ–π ground truth contexts –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ.

---

## üèÜ –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –õ—É—á—à–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–î–ª—è –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ (RAG –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –°–±–µ—Ä–±–∞–Ω–∫–∞) **—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º Semantic**:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Semantic | Hybrid | Hybrid + Reranker |
|----------|:--------:|:------:|:-----------------:|
| –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ | ‚úÖ –õ—É—á—à–∏–π | ‚ûñ | ‚ùå –•—É–¥—à–∏–π |
| –û–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å | ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ | ‚ûñ –•–æ—Ä–æ—à–æ | ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ |
| –°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã | ‚úÖ –ë—ã—Å—Ç—Ä—ã–π | ‚ûñ –°—Ä–µ–¥–Ω–∏–π | ‚ùå –ú–µ–¥–ª–µ–Ω–Ω—ã–π |
| –ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ | ‚úÖ –ü—Ä–æ—Å—Ç–æ–π | ‚ûñ –°—Ä–µ–¥–Ω–∏–π | ‚ùå –°–ª–æ–∂–Ω—ã–π |

### –ü—Ä–∏—á–∏–Ω—ã –≤—ã–±–æ—Ä–∞ Semantic —Ä–µ–∂–∏–º–∞:

1. **–õ—É—á—à–∞—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤** (0.734 vs 0.650-0.668)
2. **–ò–¥–µ–∞–ª—å–Ω–∞—è –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** (1.000)
3. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** (–Ω–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏)
4. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ BM25 –∏ cross-encoder)

### –ö–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Ä–µ–∂–∏–º—ã:

- **Hybrid** ‚Äî –∫–æ–≥–¥–∞ –≤–∞–∂–Ω—ã —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Ç–µ—Ä–º–∏–Ω–æ–≤ (–Ω–æ–º–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è)
- **Hybrid + Reranker** ‚Äî –∫–æ–≥–¥–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ —Ç–æ–ø-3 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –µ—Å—Ç—å —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é:

1. –£–≤–µ–ª–∏—á–∏—Ç—å `RERANKER_TOP_K` —Å 3 –¥–æ 5-7 –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∂–∏–º–µ hybrid_reranker
2. –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞—Ç–∞—Å–µ—Ç —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º ground truth contexts –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ Context Precision
3. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –º–æ—â–Ω–æ–π embedding –º–æ–¥–µ–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã

### LangSmith Dashboard

![LangSmith Dashboard](screenshots/–°–Ω–∏–º–æ–∫.PNG)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
07-advanced-rag/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ bot.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers.py         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ Telegram
‚îÇ   ‚îú‚îÄ‚îÄ rag.py              # RAG-–ª–æ–≥–∏–∫–∞ –∏ retriever
‚îÇ   ‚îú‚îÄ‚îÄ indexer.py          # –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ evaluation.py       # RAGAS –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
‚îÇ   ‚îî‚îÄ‚îÄ dataset_synthesizer.py  # –°–∏–Ω—Ç–µ–∑ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
‚îú‚îÄ‚îÄ data/                   # PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ datasets/               # –°–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞—Ç–∞—Å–µ—Ç—ã
‚îú‚îÄ‚îÄ prompts/                # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è RAG
‚îú‚îÄ‚îÄ screenshots/            # –°–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–ª—è –æ—Ç—á—ë—Ç–∞
‚îú‚îÄ‚îÄ .env                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ env.example             # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ pyproject.toml          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ Makefile                # –ö–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ report.md               # –î–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.11+**
- **aiogram 3.x** ‚Äî Telegram Bot API
- **LangChain** ‚Äî RAG framework
- **Ollama** ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ LLM
- **RAGAS** ‚Äî –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ RAG
- **LangSmith** ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥
- **sentence-transformers** ‚Äî cross-encoder –¥–ª—è reranking
- **rank-bm25** ‚Äî –ª–µ–∫—Å–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫

---

*–û—Ç—á—ë—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: –î–µ–∫–∞–±—Ä—å 2025*

